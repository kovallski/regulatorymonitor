"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_query_1 = require("@tanstack/react-query");
const api_1 = require("../../client/api");
const ui_1 = require("../../components/ui");
const separator_1 = require("../../components/ui/separator");
const lucide_react_1 = require("lucide-react");
function Reports() {
    // Fetch reports
    const { data: reports = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['reports'],
        queryFn: api_1.apiClient.listReports,
    });
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold tracking-tight", children: "\u041E\u0442\u0447\u0435\u0442\u044B" }), (0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground", children: "\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043E\u0442\u0447\u0435\u0442\u043E\u0432" })] }), (0, jsx_runtime_1.jsx)(separator_1.Separator, {}), isLoading ? ((0, jsx_runtime_1.jsx)("div", { className: "space-y-4", children: Array.from({ length: 3 }).map((_, i) => ((0, jsx_runtime_1.jsxs)(ui_1.Card, { children: [(0, jsx_runtime_1.jsx)(ui_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(ui_1.Skeleton, { className: "h-6 w-3/4" }) }), (0, jsx_runtime_1.jsxs)(ui_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(ui_1.Skeleton, { className: "h-4 w-full" }), (0, jsx_runtime_1.jsx)(ui_1.Skeleton, { className: "h-4 w-3/4 mt-2" })] })] }, i))) })) : reports.length === 0 ? ((0, jsx_runtime_1.jsx)(ui_1.Card, { children: (0, jsx_runtime_1.jsxs)(ui_1.CardContent, { className: "flex flex-col items-center justify-center p-6", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileSpreadsheet, { className: "h-12 w-12 text-muted-foreground mb-4" }), (0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium", children: "\u041D\u0435\u0442 \u043E\u0442\u0447\u0435\u0442\u043E\u0432" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground text-center mt-1", children: "\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043E\u0442\u0447\u0435\u0442 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0414\u0430\u0448\u0431\u043E\u0440\u0434" })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: "space-y-4", children: reports.map((report) => ((0, jsx_runtime_1.jsxs)(ui_1.Card, { children: [(0, jsx_runtime_1.jsxs)(ui_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(ui_1.CardTitle, { children: report.name }), (0, jsx_runtime_1.jsxs)(ui_1.CardDescription, { children: ["\u0421\u043E\u0437\u0434\u0430\u043D: ", new Date(report.createdAt).toLocaleString("ru-RU")] })] }), (0, jsx_runtime_1.jsx)(ui_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "h-4 w-4 mr-2 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm", children: ["\u041F\u0435\u0440\u0438\u043E\u0434:", " ", new Date(report.dateFrom).toLocaleDateString("ru-RU"), " -", " ", new Date(report.dateTo).toLocaleDateString("ru-RU")] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: "h-4 w-4 mr-2 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm", children: ["\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ", report.itemCount] })] }), report.keywordsUsed && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: "h-4 w-4 mr-2 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm", children: ["\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u0441\u043B\u043E\u0432\u0430: ", report.keywordsUsed] })] }))] }) }), (0, jsx_runtime_1.jsx)(ui_1.CardFooter, { children: (0, jsx_runtime_1.jsxs)(ui_1.Button, { variant: "outline", onClick: () => window.open(report.fileUrl, "_blank"), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: "mr-2 h-4 w-4" }), "\u0421\u043A\u0430\u0447\u0430\u0442\u044C Excel"] }) })] }, report.id))) }))] }));
}
exports.default = Reports;
